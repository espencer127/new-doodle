<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PrintArea/2.4.1/jquery.PrintArea.js"></script>
    <script src="jquery.js"></script>
    <script src="jquery.PrintArea.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

    <meta name="viewport" content="width=device-width, initial-scale=1">

<!--<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
      <div class="w3-container">
!-->

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<style>
    
    /*if the width is under 450, make the h1s and h2s way smaller */
    
    @media (min-width:100px){.w3-col.m1{width:8.33333%}.w3-col.m2{width:16.66666%}.w3-col.m3,.w3-quarter{width:24.99999%}.w3-col.m4,.w3-third{width:33.33333%}

    .container{
        background: rgba(250,250,250,.7);
        padding:0.01em 16px;
        margin-top:2.5vh;
        margin-left:2.5%;
        margin-bottom:2.5vh;
        width:95%;
        height:95vh;
    }
    .btn {
      white-space:normal;
    }
    div #clock {
        font-size:28px;
        text-align:center;
    }
    .radio input[type="radio"] {
      float:none;
      margin-left:5px;
    }
    body {
        background-color: yellow;
        font-family: 'Open Sans', sans-serif;
    }
    hr {
        size:10;
        border-color:black;
    }
    
    h1,h2,h3 {
        text-align:center;
    }
</style>

<script>

$(document).ready(function(){
    $("#printButton").click(function(){
        var mode = 'iframe'; //popup
        var close = mode == "popup";
        var options = { mode : mode, popClose : close};
        $("div.printableArea").printArea( options );
    });
});
</script>

<script>
    var visitorsToday;
    
    var allVisitors = [];

    function initPage() {
        document.getElementById('visitorsGoHere').innerHTML = "We'll have visitors soon!";
        
        document.getElementById("checkinButton").addEventListener("click", function() {
            addVisitor();
        });

        
            }

    function addVisitor() {
        var volFName = document.getElementById('mce-FNAME').value;
        var volLName = document.getElementById('name2').value;
        var volEmail = document.getElementById('mce-EMAIL').value;
        var theName = [volFName, volLName, volEmail];
        allVisitors.push(theName);
      
        var filteredArray = allVisitors.map(ind => ind[0] + " " + ind[1] +": " + ind[2] + " clocked in at: ").join("\<br\>")
        document.getElementById('visitorsGoHere').innerHTML = filteredArray;
        
        document.forms["mc-embedded-subscribe-form"].submit();

        document.getElementById('mce-FNAME').value = "";
        document.getElementById('name2').value = "";
        document.getElementById('mce-EMAIL').value = "";
    }

    function displayClock() {
        var time = new Date();
        var hrs = time.getHours();
        var min = time.getMinutes();
        var themon = (time.getMonth() + 1);
        var theday = time.getDate();
        if (hrs > 12) {
          hrs = hrs - 12;
        }
        if ((min == 0)) {
          min = "00";
        }
        if ((min < 10) && (min != 0)) {
          min = "0" + min;
        }
        document.getElementById('clock').innerHTML = 'Attendance for ' + themon + '/' + theday + ' :';
    }
    
</script>

</head>

<body onload="initPage()">
    <div class="container">

    <h1>Welcome to Open Shop!</h1>
    <h3>Please take a second to sign in below.</h3>
    <hr>
    <p><b>We have a mandatory safe space policy.</b></p>
    <p>We will not tolerate any speech or behavior which makes other people feel uncomfortable. This includes, but is not limited to, aggressive speech, (unasked for help), and discrimination against race, age, gender, sexuality, faith and disability. You will be asked to leave the premises if it is felt that you are violating this policy. </p>
    <p>Enjoy your stay and have fun! Please do not hesitate to ask a staffer any questions you might have.</p>
    <hr>
             
    <form action="https://eispencer.us19.list-manage.com/subscribe/post?u=26880df608096fb7849ba9720&amp;id=27e8e26b5e" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
          
        <div class="form-group row">    
            <div class="col-sm-2 mc-field-group"><label for="mce-FNAME">First Name</label> </div>
            <div class="col-sm-2 mc-field-group"><label for="name2">Last Name</label></div>
            <div class="col-sm-4">
                <input type="text" class="form-control required" placeholder="First name" id="mce-FNAME" value="" name="FNAME">
            </div>
            <div class="col-sm-4">
                <input type="text" class="form-control" placeholder="Last name" value="" id="name2">
            </div>
        </div>

        <div class="form-group row">
            <div class="col-sm-4 mc-field-group"><label for="mce-EMAIL">Email Address </label></div>
            <div class="col-sm-8">
                <input type="email" class="form-control" placeholder="Enter email" value="" name="EMAIL" class="email" id="mce-EMAIL">
            </div>
        </div>
 
        <div class="row">
            <div class="col-sm-4">Would you like to receive email updates from us?
            </div>

            <div class="col-sm-8">
                <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="emailCheck1">
                <label class="form-check-label" for="emailCheck1">General shop information</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="emailCheck2">
                <label class="form-check-label" for="emailCheck2">
                Volunteer opportunities</label>
            </div>
        </div>
        </div>
              
        <div class="row">
            <div class="col-sm-4">Is this your first time here?
            </div>
            <div class="col-sm-8">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="firstTime" id="firstTime1">
                    <label class="form-check-label" for="firstTime1">Yes</label>
                </div>
                <div class="form-check ">
                    <input class="form-check-input" type="radio" name="firstTime" id="firstTime2">
                    <label class="form-check-label" for="firstTime2">No</label>
                </div>
            </div>
        </div>
        
        <input type="hidden" value="Yes" name="MMERGE6" id="MMERGE6">

        <input type="hidden" value="Yes" name="MMERGE7" id="MMERGE7">
        
        <br>
        <div class="row">
          <div class="col-md-2"></div>
          <div class="col-md-8">
            <input class="btn btn-block btn-primary"  id='checkinButton' value="Check In">
          </div>
        </div>

    </form>
</div>

<div class="container printableArea">
    <div class="row">
      <div class="col-md-12">  
        <div id="clock">
          <script language="javascript">
            setInterval(displayClock, 500);
          </script>
        </div>
    
      </div>
    </div>
    
    <div class="row">        
      <div class="col-md-12" id="visitorsGoHere"></div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <button type="button" class="btn btn-block btn-primary printButton"  id='printButton' value='Print'>Print It
          </button>
      </div>
    </div>

</div>

    
    
  <!-- Load in jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	
<script>
	$('form.sign-up').on('submit',function(e) {
		// Highjack the submit button, we will do it ourselves
		e.preventDefault();
		// uncomment next line & check console to see if button works
		// console.log('submit button worked!');

		// store all the form data in a variable
		var formData = $(this).serialize();

		// Let's make the call!
		// Replace the path to your own endpoint!
		$.getJSON('http://eispencer.com/public_html/new-doodle/mc-end-point.php', formData ,function(data) {
			// uncomment next line to see your data output in console
			// console.log(data);
			
			// If it worked...
			if(data.status === 'subscribed') {
				// Let us know!
				alert('Thanks!');
			} else {
				// Otherwise tell us why it didn't
				alert("oops error: " + data.detail);
			}
		});

	});
</script>
    
    
</body>
</html>